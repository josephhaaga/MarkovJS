<html>
	<script   src="https://code.jquery.com/jquery-migrate-3.0.0.min.js"   integrity="sha256-JklDYODbg0X+8sPiKkcFURb5z7RvlNMIaE3RA2z97vw="   crossorigin="anonymous"></script>
	<body>
		<script>

			 // 88  88 888888 88     8888o. 888888 8888o.    888888 88  88 8888o. .o8888 888888 88 .o88o. 8888o. .o8888 
			 // 88  88 88     88     88  88 88     88  88    88     88  88 88  88 88       88   88 88  88 88  88 88     
			 // 888888 8888   88     8888Y' 8888   8888Y'    8888   88  88 88  88 88       88   88 88  88 88  88 'Y88o. 
			 // 88  88 88     88     88     88     88  88    88     88  88 88  88 88       88   88 88  88 88  88     88 
			 // 88  88 888888 888888 88     888888 88  88    88     'Y88Y' 88  88 'Y8888   88   88 'Y88Y' 88  88 8888Y' 

			var __VERBOSE__ = true;

			function print_for_debug(a_string){
				if(__VERBOSE__){
					console.log(a_string);
				}
			}
			function count_of(input_word){
				if(input_text.indexOf(input_word)>-1){
					return (input_text.split(input_word).length - 1);
				}
			}
			function getAllIndexes(arr, val) {
			    var indexes = [], i;
			    for(i = 0; i < arr.length; i++)
			        if (arr[i] === val)
			            indexes.push(i);
			    return indexes;
			}

			var input_text = "The quick brown fox jumped over the lazy dog. I dont know why the dog was so lazy, but the fox was the quick and brown";

			input_text = input_text.toLowerCase().replace(",","").replace(".","");


			var array_of_words = input_text.split(" ");

			print_for_debug(array_of_words);

			var uniques = [];

			for(var i=0; i<array_of_words.length; i++){
				// Clean up input text
				// array_of_words[i] = array_of_words[i].toLowerCase().replace(",","").replace(".","");
				if(!uniques.includes(array_of_words[i])){
					uniques.push(array_of_words[i]);
				}
			}

			print_for_debug("uniques "+uniques);

			// generate probabilities
			var probabilities = [];

			var individual_counts = {}


			// probability (j | i) = count(i + j) / count (i)

			for(var j=0; j<uniques.length; j++){
				individual_counts[uniques[j]] = count_of(uniques[j]);
			}

			var bigram = "";
			var first_word = "";
			var second_word = "";



			// for(var k=0; k<array_of_words.length-1; k++){
			// 	var temp = [];
			// 	first_word = array_of_words[k].toLowerCase();
			// 	second_word = array_of_words[k+1].toLowerCase();
			// 	bigram = first_word+" "+second_word;

			// 	temp[second_word] = (count_of(bigram)/count_of(first_word));

			// 	if(probabilities[first_word]==undefined){
			// 		probabilities[first_word] = [];
			// 		probabilities[first_word].push(temp);
			// 		// console.log('inserted '+first_word+' prob:'+temp[second_word]);
			// 	}else{
			// 		probabilities[first_word].push(temp);
			// 	}
			// 	// The quick
			// 	// quick brown
			// }
			// console.log(probabilities);


			var appearances = [];
			var following_words = [];
			var master_list = [];
			var temp = [];

			for(var k=0; k<uniques.length-1; k++){
				temp = [];
				first_word=uniques[k];
				console.log(first_word);
				appearances = getAllIndexes(array_of_words,first_word);

				for(var z=0;z<appearances.length;z++){
					second_word = array_of_words[appearances[z]+1];
					console.log("    "+second_word);
					// temp[second_word] = (count_of(first_word+" "+second_word)/count_of(first_word));
					temp.push([second_word,(count_of(first_word+" "+second_word)/count_of(first_word))])
				}

				// master_list[first_word] = temp;
				master_list.push([first_word,temp]);

			}




			// for(var k=0; k<uniques.length-1; k++){
			// 	var num_times_word_appears = individual_counts[uniques[k]];
			// 	var string = input_text;
			// 	var appearances = []
			// 	for(var z=num_times_word_appears;z>0;z--){

			// 	}
			// }

		</script>
	</body>
</html>